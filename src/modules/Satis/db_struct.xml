<database>
    <table name="packages">
        <column name="id" type="INT UNSIGNED" allownull="0" autoinc="1" />
        <column name="active" type="TINYINT UNSIGNED" allownull="0" default="1" />
        <column name="date_added" type="DATETIME" allownull="0" />
        <column name="date_modified" type="DATETIME" allownull="0" />

        <column name="name" type="VARCHAR(100)" allownull="0" />
        <column name="repo_url" type="VARCHAR(255)" allownull="0" />
        <column name="webhook_token" type="VARCHAR(255)" allownull="0" />

        <column name="last_build_time" type="DATETIME" allownull="1" />
        <column name="build_success" type="TINYINT UNSIGNED" allownull="0" default="0" />
        <column name="worker_id" type="INT UNSIGNED" allownull="1" />

        <primary>
            <col name="id" />
        </primary>
    </table>

    <table name="packages_cat_list">
        <column name="id" type="INT UNSIGNED" allownull="0" autoinc="1" />
        <column name="name" type="VARCHAR(50)" allownull="0" />
        <column name="date_added" type="DATETIME" allownull="0" />
        <column name="date_modified" type="DATETIME" allownull="0" />

        <primary>
            <col name="id" />
        </primary>
    </table>

    <table name="packages_cat_join">
        <column name="package_id" type="INT UNSIGNED" allownull="0" />
        <column name="cat_id" type="INT UNSIGNED" allownull="0" />
        <column name="record_order" type="TINYINT UNSIGNED" allownull="0" default="0" />

        <primary>
            <col name="package_id" />
            <col name="cat_id" />
        </primary>
        <index>
            <col name="package_id" />
            <foreign-key table="packages" column="id" update="restrict" delete="cascade" />
        </index>
        <index>
            <col name="cat_id" />
            <foreign-key table="packages_cat_list" column="id" update="restrict" delete="cascade" />
        </index>
    </table>

    <table name="sites">
        <column name="id" type="INT UNSIGNED" allownull="0" autoinc="1" />
        <column name="active" type="TINYINT UNSIGNED" allownull="0" default="1" />
        <column name="date_added" type="DATETIME" allownull="0" />
        <column name="date_modified" type="DATETIME" allownull="0" />

        <column name="record_order" type="TINYINT UNSIGNED" allownull="0" default="0" />

        <column name="name" type="VARCHAR(100)" allownull="0" />
        <column name="token" type="VARCHAR(255)" allownull="0" />

        <primary>
            <col name="id" />
        </primary>
    </table>

    <table name="sites_cat_list">
        <column name="id" type="INT UNSIGNED" allownull="0" autoinc="1" />
        <column name="name" type="VARCHAR(50)" allownull="0" />
        <column name="date_added" type="DATETIME" allownull="0" />
        <column name="date_modified" type="DATETIME" allownull="0" />

        <primary>
            <col name="id" />
        </primary>
    </table>

    <table name="sites_cat_join">
        <column name="site_id" type="INT UNSIGNED" allownull="0" />
        <column name="cat_id" type="INT UNSIGNED" allownull="0" />
        <column name="record_order" type="TINYINT UNSIGNED" allownull="0" default="0" />

        <primary>
            <col name="site_id" />
            <col name="cat_id" />
        </primary>
        <index>
            <col name="site_id" />
            <foreign-key table="sites" column="id" update="restrict" delete="cascade" />
        </index>
        <index>
            <col name="cat_id" />
            <foreign-key table="sites_cat_list" column="id" update="restrict" delete="cascade" />
        </index>
    </table>

    <table name="webhook_log">
        <column name="id" type="INT UNSIGNED" allownull="0" autoinc="1" />
        <column name="date_added" type="DATETIME" allownull="0" />

        <column name="headers" type="TEXT" allownull="0" default="0" />
        <column name="body" type="TEXT" allownull="0" default="0" />

        <primary>
            <col name="id" />
        </primary>
    </table>
</database>
